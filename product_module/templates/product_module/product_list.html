{% extends 'shared/layout.html' %}

{% block title %}
    product list
{% endblock %}

{% block content %}

    <div class="top_page">
        <div class="containeres">
            <h1>Experience the Future of Technology with Our Topico.</h1>
            <p>Find everything you need to transform your home into a smart, connected space. Our Topico store offers a
                wide range of devices to fit your needs</p>
        </div>
    </div>

    <section class="all_products">
        <div class="containeres">
            <span class="btn_filter" onclick="open_close_filter()">
                filter <i class="fa-solid fa-filter"></i>
            </span>

            <div class="filter">
                <h2>filter</h2>

                <div class="categories filter_item">
                    <h4>categories</h4>
                    {% for main_category in main_categories %}
                        <div class="category">
                            {% if main_category.subcategories %}
                                <div class="category-title" onclick="toggleExclusive(this)">
                                    <span>{{ main_category.title }}</span>
                                    <span class="arrow">&#9654;</span>
                                </div>
                                <ul class="subcategory-list">
                                    {% for sub in main_category.subcategories %}
                                        <li>
                                            <a href=" {{ url_for('p_views.product_list',category=sub.url_title) }}">{{ sub.title }}</a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <div class="category-title no-sub">
                                    <a href="
                                            {{ url_for('p_views.product_list',category=main_category.url_title) }}">{{ main_category.title }}</a>
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>


                <div class="filter_item">
                    <h4>Brand</h4>
                    <div class="content">

                        <div class="item">
                            <span>Apple</span>
                            <input type="checkbox">
                        </div>

                        <div class="item">
                            <span>samsung</span>
                            <input type="checkbox">
                        </div>


                        <div class="item">
                            <span>intel</span>
                            <input type="checkbox">
                        </div>


                        <div class="item">
                            <span>oppo</span>
                            <input type="checkbox">
                        </div>

                        <div class="item">
                            <span>xiaomi</span>
                            <input type="checkbox">
                        </div>

                        <div class="item">
                            <span>huawei</span>
                            <input type="checkbox">
                        </div>

                    </div>
                </div>
            </div>

            <div id="products_dev" class="products_dev">

                {% for product in products %}
                    <div class="product swiper-slide">
                        <div class="icons">
                            <span><i onclick="addToCart(1, this)" class="fa-solid fa-cart-plus"></i></span>
                            <span><i class="fa-solid fa-heart"></i></span>
                            <span><i class="fa-solid fa-share"></i></span>
                        </div>
                        <span class="sale_present">%20</span>
                        <div class="img_product">

                            {% if product.image1 %}
                                <img src="{{ url_for('p_views.get_image', filename=product.image1) }}" alt="Product 1">

                            {% else %}
                                <img src="/static/img/product/product-1.jpg">
                            {% endif %}

                            {% if product.image2 %}
                                <img class="img_hover" src="{{ url_for('p_views.get_image', filename=product.image2) }}"
                                     alt="Product 1 Hover">

                            {% else %}
                                <img class="img_hover" src="/static/img/product/product-1.jpg" alt="Product 1 Hover">
                            {% endif %}

                        </div>
                        <h3 class="name_product"><a
                                href="{{ url_for('p_views.product_detail', slug=product.slug) }}">{{ product.title }}</a>
                        </h3>
                        <div class="stars">
                            {{ product.short_description }}
                            {#                            <i class="fa-solid fa-star"></i>#}
                            {#                            <i class="fa-solid fa-star"></i>#}
                            {#                            <i class="fa-solid fa-star"></i>#}
                            {#                            <i class="fa-solid fa-star"></i>#}
                            {#                            <i class="fa-solid fa-star"></i>#}

                        </div>
                        <div class="price">
                            <p><span>{{ product.price }}</span></p>
                            <p class="old_price">{{ product.old_price }}</p>
                        </div>
                    </div>
                {% endfor %}

            </div>
            <div class="pagination">
                {% if products.has_prev %}
                    <a href="?page={{ products.prev_num }}"><span class="btn_page prev"><i
                            class="fa-solid fa-backward-step"></i></span></a>
                {% endif %}

                {% for pageNumber in range(1,products.pages + 1) %}
                    <a href="?page={{ pageNumber }}">
                        <span class="num_page {% if products.page==pageNumber %}active{% endif %}  ">{{ pageNumber }}</span>
                    </a>
                {% endfor %}

                {% if products.has_next %}
                    <a href="?page={{ products.next_num }}"><span class="btn_page next"><i
                            class="fa-solid fa-forward-step"></i></span></a>

                {% endif %}
            </div>
        </div>
    </section>

    <div class="back_to_top">
        <p>back to top</p>
    </div>
{% endblock %}